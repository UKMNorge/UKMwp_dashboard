<script>
	{% if playback.online %}
		google.charts.setOnLoadCallback(playback_status);
	
		function playback_status() {
			var data = google.visualization.arrayToDataTable([
				['Diskplass','Tilgjengelig'],
				['Brukt (GB)', {{ playback.space.used|round(1)|replace(',','.') }}],
				['Ledig (GB)', {{ playback.space.free|round(1)|replace(',','.') }}],
			]);
			
			var options = {
			  chartArea: {'width': '100%', 'height': '88%'},
			  pieHole: 0.4,
			  legend: 'none',
			  colors: [ '#dc3545', '#28a745']
			};
			
			var chart = new google.visualization.PieChart(document.getElementById('playback_graph'));
			chart.draw(data, options);
		}
	{% else %}
		jQuery(document).ready(function(){
			var warning = jQuery('<div>')
			    .css('margin-left', '-8px')
			    .css('margin-right', '-8px')
                .css('padding-left', '2px')
                .css('padding-right', '2px')
                .css('overflow-x', 'hidden')
			    .addClass('alert alert-danger')
			    .html('Playbackserver ser ut til å være offline! <br /><span class="hidden-xs small">(https://playback.{{ UKM_HOSTNAME }})</span>');
			jQuery('#playback_graph').html( warning );
		});
	{% endif %}
</script>
<table class="table table-dashboard {{ playback.space.free_percentage < 10 ? 'danger' }}">
	<thead>
		<tr class="">
			<th colspan="2">
				Playback
			</th>
		</tr>
	</thead>
	<tbody>						
		<tr>
			<td align="center">
				{% if playback.online %}
					<p>
						{{ playback.space.free_percentage|round(1) }}% ledig
						<br />
						<small>
							{{ playback.diskspace|filesize(0) }} av {{ playback.total_diskspace|filesize(0) }}
						</small>
					</p>
				{% endif %}
				<div id="playback_graph" style="width:90%; max-width: 95%; height: 120px; min-height:100px; max-height:150px;">Laster inn...</div>
			</td>
		</tr>

	</tbody>
</table>
