<script>
	{% if videoconverter.online %}
		google.charts.setOnLoadCallback(videoconverter_queue_status);
	
		function videoconverter_queue_status() {
			var data = google.visualization.arrayToDataTable([
				['Sesong', 'Data'],
				['First convert', {{ videoconverter.queue.first_convert }}],
				['Final convert', {{ videoconverter.queue.final_convert }}],
				['Archive convert', {{ videoconverter.queue.archive_convert }}]
			]);
			
			var options = {
			  chartArea: {'width': '100%', 'height': '88%'},
			  pieSliceText: 'value',
			  pieHole: 0.4,
			  legend: 'none'
			  
			};
			
			var chart = new google.visualization.ColumnChart(document.getElementById('videoconverter_queue_graph'));
			chart.draw(data, options);
		}
	{% else %}
		jQuery(document).ready(function(){
			var warning = jQuery('<div>')
			    .css('margin-left', '-8px')
			    .css('margin-right', '-8px')
                .css('padding-left', '2px')
                .css('padding-right', '2px')
			    .css('overflow-x', 'hidden')
			    .addClass('alert alert-danger')
			    .html('Videokonvertereren ser ut til å være offline! <br /><span class="hidden-xs small">(http://videoconverter.{{ UKM_HOSTNAME }})</span>');
			jQuery('#videoconverter_queue_graph').html( warning );
		});
	{% endif %}
</script>
<table class="table table-dashboard">
	<thead>
		<tr class="">
			<th colspan="2">
				Konverteringskø
			</th>
		</tr>
	</thead>
	<tbody>						
		<tr>
			<td align="center">
				<div id="videoconverter_queue_graph" style="width:90%; max-width: 95%; height: 120px; min-height:100px; max-height:150px;">Laster inn...</div>
				{% if videoconverter.online %}
				<p>
					<small>
						{% if videoconverter.time.total is defined and videoconverter.time.total > 0 %}
							Antatt ferdig {{ ("now +"~ videoconverter.time.total ~"min")|dato('d.M H:i') }}
						{% else %}
							Ingen konverteringskø
						{% endif %}
					</small>
				</p>
				{% endif %}
			</td>
		</tr>

	</tbody>
</table>